<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¡œê·¸ì¸ - ìµëª… ë©”ì‹œì§€í•¨</title>
  <style>
    /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .container{background:white;border-radius:20px;padding:40px;max-width:400px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
    h1{text-align:center;color:#667eea;margin-bottom:10px}
    .subtitle{text-align:center;color:#666;margin-bottom:30px}
    .tabs{display:flex;gap:10px;margin-bottom:30px}
    .tab{flex:1;padding:12px;text-align:center;border:2px solid #ddd;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s}
    .tab.active{background:#667eea;color:white;border-color:#667eea}
    .form-group{margin-bottom:15px}
    label{display:block;margin-bottom:5px;color:#333;font-weight:600;font-size:14px}
    input{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:15px}
    input:focus{outline:none;border-color:#667eea}
    button{width:100%;padding:14px;background:#667eea;color:white;border:none;border-radius:8px;font-size:16px;cursor:pointer;font-weight:600;margin-top:10px}
    button:hover{background:#5568d3}
    button:disabled{background:#ccc;cursor:not-allowed}
    .error{color:#dc3545;font-size:14px;margin-top:10px;text-align:center}
    .success{color:#28a745;font-size:14px;margin-top:10px;text-align:center}
    #signupForm{display:none}
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ’¬ ìµëª… ë©”ì‹œì§€í•¨</h1>
    <p class="subtitle">ë‚˜ë§Œì˜ ìµëª… ë©”ì‹œì§€í•¨ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>

    <div class="tabs">
      <div class="tab active" onclick="showLogin()">ë¡œê·¸ì¸</div>
      <div class="tab" onclick="showSignup()">íšŒì›ê°€ì…</div>
    </div>

    <form id="loginForm" onsubmit="handleLogin(event)">
      <div class="form-group"><label>ì´ë©”ì¼</label><input type="email" id="loginEmail" required placeholder="example@email.com"></div>
      <div class="form-group"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="loginPassword" required placeholder="ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 6ì)"></div>
      <button type="submit">ë¡œê·¸ì¸</button>
      <p id="loginError" class="error"></p>
    </form>

    <form id="signupForm" onsubmit="handleSignup(event)">
      <div class="form-group"><label>ë‹‰ë„¤ì„</label><input type="text" id="signupUsername" required placeholder="ì‚¬ìš©í•  ë‹‰ë„¤ì„"></div>
      <div class="form-group"><label>ì´ë©”ì¼</label><input type="email" id="signupEmail" required placeholder="example@email.com"></div>
      <div class="form-group"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="signupPassword" required placeholder="ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 6ì)" minlength="6"></div>
      <button type="submit">íšŒì›ê°€ì…</button>
      <p id="signupError" class="error"></p>
      <p id="signupSuccess" class="success"></p>
    </form>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: globalThis.FIREBASE_API_KEY,
      authDomain: globalThis.FIREBASE_AUTH_DOMAIN,
      databaseURL: globalThis.FIREBASE_DB_URL,
      projectId: globalThis.FIREBASE_PROJECT_ID,
      storageBucket: globalThis.FIREBASE_STORAGE_BUCKET,
      messagingSenderId: globalThis.FIREBASE_MESSAGING_SENDER_ID,
      appId: globalThis.FIREBASE_APP_ID,
      measurementId: globalThis.FIREBASE_MEASUREMENT_ID
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    window.showLogin = ()=>{document.getElementById('loginForm').style.display='block';document.getElementById('signupForm').style.display='none';document.querySelectorAll('.tab')[0].classList.add('active');document.querySelectorAll('.tab')[1].classList.remove('active');};
    window.showSignup = ()=>{document.getElementById('loginForm').style.display='none';document.getElementById('signupForm').style.display='block';document.querySelectorAll('.tab')[0].classList.remove('active');document.querySelectorAll('.tab')[1].classList.add('active');};

    window.handleLogin = async (e)=>{
      e.preventDefault();
      const email=document.getElementById('loginEmail').value;
      const password=document.getElementById('loginPassword').value;
      const errorEl=document.getElementById('loginError');
      errorEl.textContent='';

      try{await signInWithEmailAndPassword(auth,email,password);window.location.href='index.html';}
      catch(error){errorEl.textContent='ë¡œê·¸ì¸ ì‹¤íŒ¨: '+error.message;}
    };

    window.handleSignup=async(e)=>{
      e.preventDefault();
      const username=document.getElementById('signupUsername').value.trim();
      const email=document.getElementById('signupEmail').value;
      const password=document.getElementById('signupPassword').value;
      const errorEl=document.getElementById('signupError');
      const successEl=document.getElementById('signupSuccess');
      errorEl.textContent=''; successEl.textContent='';

      try{
        const userCredential=await createUserWithEmailAndPassword(auth,email,password);
        await set(ref(db,'users/'+userCredential.user.uid),{username});
        successEl.textContent='íšŒì›ê°€ì… ì„±ê³µ! ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™...';
        setTimeout(()=>{window.location.href='index.html';},1500);
      }catch(error){errorEl.textContent='íšŒì›ê°€ì… ì‹¤íŒ¨: '+error.message;}
    };
  </script>
</body>
</html>
